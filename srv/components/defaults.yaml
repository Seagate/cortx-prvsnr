tmp_dir: /tmp

{% if pillar['eos_release']['type'] == 'public' %}

  {% set base_public_url = pillar['eos_release']['target_build'] %}

  {% if "RedHat" in grains['os'] %}
    {% set system_repo = '/'.join([base_public_url, 'rhel7.7']) %}
  {% else %}
    # FIXME EOS-12508 not considered yet ?
    {% set system_repo = '/'.join([base_public_url, 'centos7.7']) %}
  {% endif %}

  {% set cortx_repo = '/'.join([base_public_url, 'cortx_iso']) %}
  {% set cortx_deps_repo = '/'.join([base_public_url, '3rd_party']) %}

  {% set repo_url = cortx_repo %}
  {% set cortx_commons_url = cortx_deps_repo %}

base_repos:
  centos_repos:  # FIXME EOS-12508 extras, updates
    - id: "cortx_platform_base"
      url: {{ system_repo }}
  epel_repo:
    id: "epel"
    url: {{ cortx_deps_repo }}/EPEL-7
  saltstack_repo:
    id: "saltstack"
    url: {{ cortx_deps_repo }}/saltstack-2019.2.0


{% else %}

{% set repo_url = pillar['eos_release']['target_build'] %}
# {% set base_repo_url = "http://eos-poc-katello1.mero.colo.seagate.com/pulp/repos/EOS/Production/" %}

{% if "RedHat" in grains['os'] %}
  {% set cortx_commons_url = pillar['commons']['cortx_commons']['RedHat'] %}
{% else %}
  {% set cortx_commons_url = pillar['commons']['cortx_commons']['CentOS'] %}
{% endif %}

base_repos:
  centos_repos:
    - id: "cortx_platform_base"
      # url: http://mirrors.usc.edu/pub/linux/distributions/centos/7.7.1908/os/x86_64/
      url: http://ssc-satellite1.colo.seagate.com/pulp/repos/EOS/Library/custom/CentOS-7/CentOS-7-OS/
    - id: "cortx_platform_extras"
      # url: http://mirrors.usc.edu/pub/linux/distributions/centos/7.7.1908/extras/x86_64/
      url: http://ssc-satellite1.colo.seagate.com/pulp/repos/EOS/Library/custom/CentOS-7/CentOS-7-Extras/
    - id: "cortx_platform_updates"
      # url: http://mirrors.usc.edu/pub/linux/distributions/centos/7.7.1908/updates/x86_64/
      url: http://ssc-satellite1.colo.seagate.com/pulp/repos/EOS/Library/custom/CentOS-7/CentOS-7-Updates/
  epel_repo:
    id: "epel"
    # url: https://dl.fedoraproject.org/pub/epel/7/x86_64/
    url: http://ssc-satellite1.colo.seagate.com/pulp/repos/EOS/Library/custom/EPEL-7/EPEL-7/
  saltstack_repo:
    id: "saltstack"
    url: https://archive.repo.saltstack.com/py3/redhat/7/x86_64/archive/2019.2.0/



{% endif %}  # type of release


commons:
  repo:
  # Binaries from external sources
    id: "cortx_commons"
    url: {{ cortx_commons_url }}

sspl:
  repo:
    id: "sspl"
    url: {{ repo_url }}
    gpgkey: {{ repo_url }}/RPM-GPG-KEY-Seagate
  uploads_repo:
  # Binaries from external sources
    id: "sspl_uploads"
    url: {{ cortx_commons_url }}

lustre:
  repo:
    id: "lustre"
    url:
      tcp: {{ cortx_commons_url }}/lustre/custom/tcp/
      o2ib: {{ cortx_commons_url }}/lustre/custom/o2ib/

eoscore:
  repo:
    id: "eoscore"
    url: {{ repo_url }}
    gpgkey: {{ repo_url }}/RPM-GPG-KEY-Seagate

hare:
  repo:
    id: "hare"
    url: {{ repo_url }}
    gpgkey: {{ repo_url }}/RPM-GPG-KEY-Seagate

s3server:
  repo:
    id: "s3server"
    url: {{ repo_url }}
    gpgkey: {{ repo_url }}/RPM-GPG-KEY-Seagate
  uploads_repo:
  # Binaries from external sources
    id: "s3server_uploads"
    url: {{ cortx_commons_url }}
  config:
    DEPLOY_TAG: "s3dev"
    S3_VERSION: "1.0"
    S3_DOMAIN: "s3.seagate.com"

nfs:
  repo:
    id: "nfs"
    url: {{ repo_url }}
    gpgkey: {{ repo_url }}/RPM-GPG-KEY-Seagate
  uploads_repo:
  # Binaries from external sources
    id: "nfs_uploads"
    url: {{ cortx_commons_url }}

csm:
  repo:
    id: "csm"
    url: {{ repo_url  }}
    gpgkey: {{ repo_url }}/RPM-GPG-KEY-Seagate
  uploads_repo:
    id: "csm_uploads"
    url: {{ cortx_commons_url }}

uds:
  repo:
    id: "uds"
    url: {{ repo_url  }}
    gpgkey: {{ repo_url }}/RPM-GPG-KEY-Seagate
