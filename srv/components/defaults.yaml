#
# Copyright (c) 2020 Seagate Technology LLC and/or its Affiliates
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# For any questions about this software or licensing,
# please email opensource@seagate.com or cortx-questions@seagate.com.
#

tmp_dir: /tmp

{% set repo_url = pillar['release']['target_build'] %}

{% if "RedHat" in grains['os'] %}
{% set cortx_commons_url = pillar['commons']['cortx_commons']['RedHat'] %}
{% else %}
{% set cortx_commons_url = pillar['commons']['cortx_commons']['CentOS'] %}
{% endif %}

base_repos:
  centos_repos:
    - id: "cortx_platform_base"
      # url: http://mirrors.usc.edu/pub/linux/distributions/centos/7.7.1908/os/x86_64/
      url: {{ salt["environ.get"]('CORTX_PLATFORM_BASE', "http://ssc-satellite1.colo.seagate.com/pulp/repos/EOS/Library/custom/CentOS-7/CentOS-7-OS/") }}
    - id: "cortx_platform_extras"
      # url: http://mirrors.usc.edu/pub/linux/distributions/centos/7.7.1908/extras/x86_64/
      url: {{ salt["environ.get"]('CORTX_PLATFORM_EXTRAS', "http://ssc-satellite1.colo.seagate.com/pulp/repos/EOS/Library/custom/CentOS-7/CentOS-7-Extras/") }}
    - id: "cortx_platform_updates"
      # url: http://mirrors.usc.edu/pub/linux/distributions/centos/7.7.1908/updates/x86_64/
      url: {{ salt["environ.get"]('CORTX_PLATFORM_UPDATES', "http://ssc-satellite1.colo.seagate.com/pulp/repos/EOS/Library/custom/CentOS-7/CentOS-7-Updates/") }}
  epel_repo:
    id: "epel"
    # url: https://dl.fedoraproject.org/pub/epel/7/x86_64/
    url: {{ salt["environ.get"]('EPEL', "http://ssc-satellite1.colo.seagate.com/pulp/repos/EOS/Library/custom/EPEL-7/EPEL-7/") }}
  saltstack_repo:
    id: "saltstack"
    url: {{ salt["environ.get"]('SALTSTACK', "https://repo.saltstack.com/py3/redhat/$releasever/$basearch/3001") }}

commons:
  repo:
  # Binaries from external sources
    id: "cortx_commons"
    url: {{ salt["environ.get"]('CORTX_COMMONS', cortx_commons_url) }}

sspl:
  repo:
    id: "sspl"
    url: {{ salt["environ.get"]('REPO_URL', repo_url) }}
    gpgkey: {{ salt["environ.get"]('REPO_URL', repo_url) }}/RPM-GPG-KEY-Seagate
  uploads_repo:
  # Binaries from external sources
    id: "sspl_uploads"
    url: {{ salt["environ.get"]('CORTX_COMMONS', cortx_commons_url) }}

lustre:
  repo:
    id: "lustre"
    url: {{ salt["environ.get"]('REPO_URL', repo_url) }}

motr:
  repo:
    id: "motr"
    url: {{ salt["environ.get"]('REPO_URL', repo_url) }}
    gpgkey: {{ salt["environ.get"]('REPO_URL', repo_url) }}/RPM-GPG-KEY-Seagate

hare:
  repo:
    id: "hare"
    url: {{ salt["environ.get"]('REPO_URL', repo_url) }}
    gpgkey: {{ salt["environ.get"]('REPO_URL', repo_url) }}/RPM-GPG-KEY-Seagate

cortx_ha:
  repo:
    id: "cortx-ha"
    url: {{ salt["environ.get"]('REPO_URL', repo_url) }}

s3server:
  repo:
    id: "s3server"
    url: {{ salt["environ.get"]('REPO_URL', repo_url) }}
    gpgkey: {{ salt["environ.get"]('REPO_URL', repo_url) }}/RPM-GPG-KEY-Seagate
  uploads_repo:
  # Binaries from external sources
    id: "s3server_uploads"
    url: {{ salt["environ.get"]('CORTX_COMMONS', cortx_commons_url) }}
  config:
    DEPLOY_TAG: "s3dev"
    S3_VERSION: "1.0"
    S3_DOMAIN: "s3.seagate.com"

nfs:
  repo:
    id: "nfs"
    url: {{ salt["environ.get"]('REPO_URL', repo_url) }}
    gpgkey: {{ salt["environ.get"]('REPO_URL', repo_url) }}/RPM-GPG-KEY-Seagate
  uploads_repo:
  # Binaries from external sources
    id: "nfs_uploads"
    url: {{ salt["environ.get"]('CORTX_COMMONS', cortx_commons_url) }}

csm:
  repo:
    id: "csm"
    url: {{ salt["environ.get"]('REPO_URL', repo_url)  }}
    gpgkey: {{ salt["environ.get"]('REPO_URL', repo_url) }}/RPM-GPG-KEY-Seagate
  uploads_repo:
    id: "csm_uploads"
    url: {{ salt["environ.get"]('CORTX_COMMONS', cortx_commons_url) }}

uds:
  repo:
    id: "uds"
    url: {{ salt["environ.get"]('REPO_URL', repo_url)  }}
    gpgkey: {{ salt["environ.get"]('REPO_URL', repo_url) }}/RPM-GPG-KEY-Seagate

provisioner:
  repo:
    id: "provisioner"
    url: {{ salt["environ.get"]('REPO_URL', repo_url) }}
    gpgkey: {{ salt["environ.get"]('REPO_URL', repo_url) }}/RPM-GPG-KEY-Seagate
