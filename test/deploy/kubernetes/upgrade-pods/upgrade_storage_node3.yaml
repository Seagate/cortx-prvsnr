apiVersion: v1
kind: Pod
metadata:
  name: storage-node3
  labels:
    app: storage-node3
    id: ccc8700fe6797ed532e311b0615c32a7
spec:
  hostname: storage-node3
  restartPolicy: Never
  nodeSelector:
    node-name: node3
  volumes:
  - name: node-id
    downwardAPI:
      items:
      - path: "id"
        fieldRef:
          fieldPath: metadata.labels['id']
  - name: solution-config
    configMap:
      name: solution-config
  - name: cortx-secret
    secret:
      secretName: cortx-secret
  - name: shared-node3
    persistentVolumeClaim:
      claimName: shared-node3
  - name: local-node3
    persistentVolumeClaim:
      claimName: local-node3
  - name: sdb
    persistentVolumeClaim:
      claimName: dev-sdb-node3
  - name: sdc
    persistentVolumeClaim:
      claimName: dev-sdc-node3
  - name: sdd
    persistentVolumeClaim:
      claimName: dev-sdd-node3
  - name: sde
    persistentVolumeClaim:
      claimName: dev-sde-node3
  - name: sdf
    persistentVolumeClaim:
      claimName: dev-sdf-node3
  - name: sdg
    persistentVolumeClaim:
      claimName: dev-sdg-node3
  - name: sdh
    persistentVolumeClaim:
      claimName: dev-sdh-node3
  - name: sdi
    persistentVolumeClaim:
      claimName: dev-sdi-node3
  containers:
  - name: cortx-data
    image: ghcr.io/seagate/cortx-all:version1
    imagePullPolicy: IfNotPresent
    args:
    - /bin/sh
    - -c
    - set -x;
      echo -e "#!/bin/bash\necho $*" > /opt/seagate/cortx/utils/bin/utils_setup;
      echo -e "#!/bin/bash\necho $*" > /opt/seagate/cortx/hare/bin/hare_setup;
      echo -e "#!/bin/bash\necho $*" > /opt/seagate/cortx/motr/bin/motr_setup;
      echo -e "#!/bin/bash\necho $*" > /opt/seagate/cortx/s3/bin/s3_setup;
      chmod +x /opt/seagate/cortx/utils/bin/utils_setup;
      chmod +x /opt/seagate/cortx/hare/bin/hare_setup;
      chmod +x /opt/seagate/cortx/motr/bin/motr_setup;
      chmod +x /opt/seagate/cortx/s3/bin/s3_setup;
      cortx_setup cluster upgrade -c yaml:///etc/cortx/cluster.conf;
    volumeMounts:
    - name: solution-config
      mountPath: /etc/cortx/solution
    - name: node-id
      mountPath: /etc/cortx/solution/node
    - name: local-node3
      mountPath: /etc/cortx
    - name: cortx-secret
      mountPath: /etc/cortx/solution/secret
    - name: shared-node3
      mountPath: /share
    volumeDevices:
    - name: sdb
      devicePath: /dev/sdb
    - name: sdc
      devicePath: /dev/sdc
    - name: sdd
      devicePath: /dev/sdd
    - name: sde
      devicePath: /dev/sde
    - name: sdf
      devicePath: /dev/sdf
    - name: sdg
      devicePath: /dev/sdg
    - name: sdh
      devicePath: /dev/sdh
    - name: sdi
      devicePath: /dev/sdi
